<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mini Block World</title>
  <style>
    body { margin: 0; background: #111; color: #fff; font-family: sans-serif; text-align: center; }
    canvas { background: #333; display: block; margin: 20px auto; border: 3px solid #666; }
    button, select { margin: 5px; padding: 8px 12px; font-size: 14px; }
  </style>
</head>
<body>

<h1>ðŸŸ« Mini Block World</h1>
<p>Click to place/remove blocks. Pick a block type below:</p>

<canvas id="world" width="800" height="600"></canvas>

<select id="blockType">
  <option value="#8B4513">Dirt ðŸŸ«</option>
  <option value="#228B22">Grass ðŸŸ©</option>
  <option value="#00BFFF">Water ðŸŸ¦</option>
  <option value="#FFD700">Sand ðŸŸ¨</option>
  <option value="#A9A9A9">Stone ðŸª¨</option>
</select>
<button onclick="clearWorld()">Clear World</button>

<script>
const canvas = document.getElementById("world");
const ctx = canvas.getContext("2d");
const blockSize = 20;
const cols = canvas.width / blockSize;
const rows = canvas.height / blockSize;

let world = [];

// Load world from localStorage if exists
if(localStorage.getItem("myWorld")) {
  world = JSON.parse(localStorage.getItem("myWorld"));
}

// Draw the world grid
function drawWorld() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  for (let y = 0; y < rows; y++) {
    for (let x = 0; x < cols; x++) {
      const block = world.find(b => b.x === x && b.y === y);
      if (block) {
        ctx.fillStyle = block.color;
        ctx.fillRect(x * blockSize, y * blockSize, blockSize, blockSize);
      }
      ctx.strokeStyle = "#222";
      ctx.strokeRect(x * blockSize, y * blockSize, blockSize, blockSize);
    }
  }
}

// Add or remove a block when canvas is clicked
canvas.addEventListener("click", e => {
  const rect = canvas.getBoundingClientRect();
  const x = Math.floor((e.clientX - rect.left) / blockSize);
  const y = Math.floor((e.clientY - rect.top) / blockSize);
  const color = document.getElementById("blockType").value;

  const index = world.findIndex(b => b.x === x && b.y === y);
  if (index >= 0) {
    world.splice(index, 1); // remove block
  } else {
    world.push({ x, y, color }); // add block
  }

  saveWorld();
  drawWorld();
});

// Save world to localStorage
function saveWorld() {
  localStorage.setItem("myWorld", JSON.stringify(world));
}

// Clear world
function clearWorld() {
  if (confirm("Clear your world?")) {
    world = [];
    saveWorld();
    drawWorld();
  }
}

drawWorld();
</script>

</body>
</html>
